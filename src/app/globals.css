@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari and Opera */
  }
}

:root {
  --foreground-rgb: 255, 255, 255;
}

html,
body {
  height: 100%;
  overflow-x: hidden;
  /* 阻止 iOS Safari 拉动回弹 */
  overscroll-behavior: none;
}

body {
  color: rgb(var(--foreground-rgb));
}

html:not(.dark) body {
  background: linear-gradient(
    180deg,
    #e6f3fb 0%,
    #eaf3f7 18%,
    #f7f7f3 38%,
    #e9ecef 60%,
    #dbe3ea 80%,
    #d3dde6 100%
  );
  background-attachment: fixed;
}

html.dark body {
  background: linear-gradient(
    180deg,
    #0a0e14 0%,
    #0d1117 18%,
    #111820 38%,
    #0f1419 60%,
    #0c1015 80%,
    #0a0d12 100%
  );
  background-attachment: fixed;
}

/* 自定义滚动条样式 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(31, 41, 55, 0.1);
}

::-webkit-scrollbar-thumb {
  background: rgba(75, 85, 99, 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(107, 114, 128, 0.5);
}

/* 视频卡片悬停效果 */
.video-card-hover {
  transition: transform 0.3s ease;
}

.video-card-hover:hover {
  transform: scale(1.05);
}

/* 渐变遮罩 */
.gradient-overlay {
  background: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 0.8) 100%
  );
}

/* 防止侧栏折叠状态在刷新时闪烁：CSS 在 React 水合前即生效 */
@media (min-width: 768px) {
  html[data-sidebar-collapsed='true'] [data-sidebar] {
    width: 4rem;
  }
  html[data-sidebar-collapsed='true'] .sidebar-offset {
    width: 4rem;
  }
}

/* 隐藏移动端（<768px）垂直滚动条 */
@media (max-width: 767px) {
  html,
  body {
    -ms-overflow-style: none; /* IE & Edge */
    scrollbar-width: none; /* Firefox */
  }

  html::-webkit-scrollbar,
  body::-webkit-scrollbar {
    display: none; /* Chrome Safari */
  }
}

/* 隐藏所有滚动条（兼容 WebKit、Firefox、IE/Edge） */
* {
  -ms-overflow-style: none; /* IE & Edge */
  scrollbar-width: none; /* Firefox */
}

*::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* View Transitions API 动画 —— 允许动画期间交互 */
::view-transition {
  pointer-events: none;
}

::view-transition-old(root) {
  animation: none;
  mix-blend-mode: normal;
  z-index: 1;
  pointer-events: none;
}

::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
  z-index: 2;
  pointer-events: none;
}

::view-transition-group(root) {
  pointer-events: none;
}

/* 强制播放器内部的 video 元素高度为 100%，并保持内容完整显示 */
div[data-media-provider] video {
  height: 100%;
  object-fit: contain;
}

.art-poster {
  background-size: contain !important; /* 使图片完整展示 */
  background-position: center center !important; /* 居中显示 */
  background-repeat: no-repeat !important; /* 防止重复 */
  background-color: #000 !important; /* 其余区域填充为黑色 */
}

/* 隐藏移动端竖屏时的 pip 按钮 */
@media (max-width: 768px) {
  .art-control-pip {
    display: none !important;
  }

  .art-control-fullscreenWeb {
    display: none !important;
  }

  .art-control-volume {
    display: none !important;
  }
}

/* 播放页顶部流光呼吸动画 */
@keyframes aurora-breathe {
  0% {
    opacity: 0.5;
    transform: scale(1) translateX(0);
  }
  20% {
    opacity: 1;
    transform: scale(1.15) translateX(3%);
  }
  40% {
    opacity: 0.55;
    transform: scale(0.95) translateX(-4%);
  }
  60% {
    opacity: 0.95;
    transform: scale(1.1) translateX(2%);
  }
  80% {
    opacity: 0.5;
    transform: scale(0.97) translateX(-2%);
  }
  100% {
    opacity: 0.5;
    transform: scale(1) translateX(0);
  }
}

/* ImagePlaceholder 骨架屏动画 */
@keyframes shine {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

:root {
  --skeleton-color: #f0f0f0;
  --skeleton-highlight: #e0e0e0;
}

@media (prefers-color-scheme: dark) {
  :root {
    --skeleton-color: #2d2d2d;
    --skeleton-highlight: #3d3d3d;
  }
}

.dark {
  --skeleton-color: #2d2d2d;
  --skeleton-highlight: #3d3d3d;
}

/* ==========================================================================
   ArtPlayer 现代化玻璃拟态风格 — 与项目 ModalShell 风格统一
   ========================================================================== */

/* --- 播放器容器圆角 --- */
.art-video-player {
  border-radius: 16px !important;
  overflow: hidden !important;
}

/* --- 右键菜单 --- */
.art-contextmenus {
  background: rgba(17, 24, 32, 0.75) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 16px !important;
  box-shadow:
    0 25px 50px -12px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.08) !important;
  padding: 6px !important;
  overflow: hidden !important;
}

.art-contextmenu {
  color: #e5e7eb !important;
  border-radius: 10px !important;
  padding: 8px 14px !important;
  font-size: 13px !important;
  transition: background 0.15s ease !important;
  border-bottom: none !important;
}

.art-contextmenu:hover {
  background: rgba(59, 130, 246, 0.18) !important;
  color: #60a5fa !important;
}

.art-contextmenu a {
  color: inherit !important;
}

/* --- 底部控制栏 --- */

/* 控制栏按钮悬停反馈（不改变布局，仅增加交互感） */
.art-controls .art-control {
  border-radius: 8px !important;
  transition: background 0.15s ease !important;
}

.art-controls .art-control:hover {
  background: rgba(255, 255, 255, 0.1) !important;
}

/* --- 进度条 --- */
.art-progress {
  padding: 0 12px !important;
}

.art-progress .art-control-progress-inner {
  height: 4px !important;
  border-radius: 4px !important;
  transition: height 0.15s ease !important;
}

.art-progress:hover .art-control-progress-inner {
  height: 6px !important;
}

.art-progress .art-progress-loaded {
  border-radius: 4px !important;
  background: rgba(255, 255, 255, 0.25) !important;
}

.art-progress .art-progress-played {
  border-radius: 4px !important;
  background: #3b82f6 !important;
}

/* 进度条拖拽手柄 */
.art-progress .art-progress-indicator {
  border-radius: 50% !important;
  background: #fff !important;
  box-shadow: 0 0 6px rgba(59, 130, 246, 0.5) !important;
  border: 2px solid #3b82f6 !important;
  transition: transform 0.1s ease !important;
}

.art-progress:hover .art-progress-indicator {
  transform: scale(1.3) !important;
}

/* 进度条时间提示 */
.art-progress .art-progress-tip {
  background: rgba(17, 24, 32, 0.8) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  color: #e5e7eb !important;
  border-radius: 8px !important;
  padding: 4px 10px !important;
  font-size: 12px !important;
  font-weight: 500 !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

/* --- 设置面板 --- */
.art-settings {
  background: rgba(17, 24, 32, 0.75) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 16px !important;
  box-shadow:
    0 25px 50px -12px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.08) !important;
  padding: 8px !important;
  padding-bottom: 10px !important;
  overflow: visible !important;
  height: auto !important;
  max-height: none !important;
}

.art-setting-item {
  border-radius: 10px !important;
  padding: 10px 14px !important;
  margin-bottom: 2px !important;
  transition: background 0.15s ease !important;
  color: #e5e7eb !important;
  font-size: 13px !important;
  border-bottom: none !important;
}

.art-setting-item:last-child {
  margin-bottom: 0 !important;
}

.art-setting-item:hover {
  background: rgba(59, 130, 246, 0.18) !important;
}

/* 设置面板内部项 */
.art-setting-item-left {
  color: #d1d5db !important;
}

.art-setting-item-right {
  color: #9ca3af !important;
}

/* 设置面板开关 */
.art-setting-item .art-setting-item-right-tooltip {
  color: #60a5fa !important;
  font-weight: 500 !important;
}

/* --- 音量面板 --- */
.art-volume-panel {
  background: none !important;
  border: none !important;
  box-shadow: none !important;
}

.art-volume-panel .art-volume-slider-handle {
  background: #3b82f6 !important;
}

.art-volume-panel .art-volume-slider-handle::before {
  background: #fff !important;
  border: 2px solid #3b82f6 !important;
  box-shadow: 0 0 4px rgba(59, 130, 246, 0.4) !important;
}

/* --- 隐藏播放器原生 loading 动画（使用自定义加载组件） --- */
.art-loading {
  display: none !important;
}

/* --- 提示文字（notice） --- */
.art-notice {
  background: none !important;
  border: none !important;
  box-shadow: none !important;
  padding: 12px 0 0 !important;
  justify-content: center !important;
}

.art-notice .art-notice-inner {
  display: inline-block !important;
  width: auto !important;
  background: rgba(17, 24, 32, 0.8) !important;
  backdrop-filter: blur(16px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(16px) saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 8px !important;
  padding: 6px 14px !important;
  color: #e5e7eb !important;
  font-size: 13px !important;
  line-height: 1.4 !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
}

/* --- 信息面板 --- */
.art-info {
  background: rgba(17, 24, 32, 0.75) !important;
  backdrop-filter: blur(20px) !important;
  -webkit-backdrop-filter: blur(20px) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 16px !important;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.3) !important;
  color: #e5e7eb !important;
}

/* --- 字幕样式 --- */
.art-subtitle {
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.6) !important;
}

/* --- 锁定按钮（移动端） --- */
.art-lock {
  background: rgba(17, 24, 32, 0.7) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 50% !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
}

.art-lock .art-icon svg {
  fill: #d1d5db !important;
}

/* --- 迷你进度条 --- */
.art-mini-progress {
  background: rgba(255, 255, 255, 0.15) !important;
  border-radius: 2px !important;
}

/* --- 播放速率选择器 --- */
.art-video-player .art-selector-list {
  background: rgba(17, 24, 32, 0.75) !important;
  backdrop-filter: blur(20px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 12px !important;
  box-shadow:
    0 25px 50px -12px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.08) !important;
  padding: 4px !important;
  overflow: hidden !important;
}

.art-video-player .art-selector-item {
  border-radius: 8px !important;
  padding: 6px 14px !important;
  color: #d1d5db !important;
  font-size: 13px !important;
  transition: background 0.15s ease !important;
}

.art-video-player .art-selector-item:hover,
.art-video-player .art-selector-item.art-current {
  background: rgba(59, 130, 246, 0.18) !important;
  color: #60a5fa !important;
}

/* --- Tooltip --- */
.art-video-player [data-balloon]::after {
  background: rgba(17, 24, 32, 0.85) !important;
  backdrop-filter: blur(12px) !important;
  -webkit-backdrop-filter: blur(12px) !important;
  color: #e5e7eb !important;
  border-radius: 8px !important;
  font-size: 12px !important;
  font-weight: 500 !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  padding: 4px 10px !important;
}

.art-video-player [data-balloon]::before {
  border-top-color: rgba(17, 24, 32, 0.85) !important;
}

/* --- 设置面板 switch 开关 --- */
.art-setting-item .art-setting-switch {
  border-radius: 12px !important;
}

/* --- 全屏模式下取消圆角 --- */
.art-video-player[data-fullscreen] {
  border-radius: 0 !important;
}

.art-video-player[data-fullscreen-web] {
  border-radius: 0 !important;
}
